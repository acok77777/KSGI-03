<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>ìš°ë¦¬ ê°€ì¡± ì‹œìƒì‹</title>

<style>
body {
  margin:0;
  font-family: Arial;
  text-align:center;

  /* ğŸŒˆ ì—°í•œ ë ˆì¸ë³´ìš° ë°°ê²½ */
  background: linear-gradient(135deg, #ffe5ec, #e0f7fa, #fff1e6, #e5ffe5);
}

/* ì œëª© */
h1 {
  margin-top:20px;
  font-size:30px;
}

/* ğŸ”» ì•„ë˜ ë°©í–¥ í™”ì‚´í‘œ */
.pointer {
  width: 0;
  height: 0;
  border-left: 15px solid transparent;
  border-right: 15px solid transparent;
  border-top: 25px solid #ff4d6d;
  margin: 10px auto;
}

/* ë£°ë › */
.wheel-container {
  position: relative;
  width: 320px;
  height: 320px;
  margin: 20px auto;
}

#wheel {
  width: 100%;
  height: 100%;
  border-radius: 50%;
  border: 8px solid white;
  box-shadow: 0 0 15px rgba(0,0,0,0.2);
}

/* ë²„íŠ¼ */
button {
  padding:12px 22px;
  font-size:16px;
  margin:10px;
  border:none;
  border-radius:12px;
  background:#ff6b81;
  color:white;
  cursor:pointer;
}

button:hover {
  background:#ff4757;
}

/* íŒì—… */
.popup {
  position: fixed;
  top:0; left:0;
  width:100%; height:100%;
  background: rgba(0,0,0,0.4);
  display:none;
  justify-content:center;
  align-items:center;
}

.popup-content {
  background:white;
  padding:30px;
  border-radius:20px;
  text-align:center;
  width:260px;
}
</style>
</head>

<body>

<h1>ğŸŒ· ìš°ë¦¬ ê°€ì¡± ì‹œìƒì‹ ğŸŒ·</h1>

<div class="pointer"></div>

<div class="wheel-container">
  <canvas id="wheel" width="320" height="320"></canvas>
</div>

<button onclick="startSpin()">ì‹œì‘</button>
<button onclick="stopSpin()">ë©ˆì¶¤</button>

<div class="popup" id="popup" onclick="closePopup()">
  <div class="popup-content">
    <h2 id="awardTitle"></h2>
    <p id="awardDesc"></p>
  </div>
</div>

<script>
const canvas = document.getElementById("wheel");
const ctx = canvas.getContext("2d");

const items = [
  "ìƒìƒì´ìƒ",
  "ì–¸ì œë‚˜ ì›ƒìƒ",
  "íˆ¬ë¨¸ì¹˜ í† ì»¤ìƒ",
  "ë“ ë“ í•œ ë²„íŒ€ëª¨ìƒ",
  "ë‘ì«€ì¿ ìƒ"
];

const descriptions = {
  "ìƒìƒì´ìƒ": "íŠ¹ì´í•œ ì¬ëŠ¥ì„ ê°€ì§„ ê°€ì¡±ì—ê²Œ ë“œë¦¬ëŠ” ìƒ",
  "ì–¸ì œë‚˜ ì›ƒìƒ": "í•­ìƒ ì›ƒìŒì„ ì£¼ëŠ” ê°€ì¡±ì—ê²Œ ë“œë¦¬ëŠ” ìƒ",
  "íˆ¬ë¨¸ì¹˜ í† ì»¤ìƒ": "ë§ì´ ë§ì€ ë§¤ë ¥ì˜ ì†Œìœ ìì—ê²Œ ë“œë¦¬ëŠ” ìƒ",
  "ë“ ë“ í•œ ë²„íŒ€ëª¨ìƒ": "ê°€ì¡±ì„ ì§€ì¼œì£¼ëŠ” ë“ ë“ í•œ ì¡´ì¬ì—ê²Œ ë“œë¦¬ëŠ” ìƒ",
  "ë‘ì«€ì¿ ìƒ": "ê·€ì—½ê³  íŠ¹ë³„í•œ ë§¤ë ¥ì„ ê°€ì§„ ê°€ì¡±ì—ê²Œ ë“œë¦¬ëŠ” ìƒ"
};

/* ğŸ¨ 5ìƒ‰ */
const colors = ["#ffadad","#ffd6a5","#fdffb6","#caffbf","#a0c4ff"];

let angle = 0;
let spinning = false;
let speed = 0;
let resultIndex = null;

/* ë£°ë › ê·¸ë¦¬ê¸° */
function drawWheel() {
  const arc = (2 * Math.PI) / items.length;

  ctx.clearRect(0,0,320,320);

  for (let i = 0; i < items.length; i++) {
    const start = angle + i * arc;

    ctx.beginPath();
    ctx.fillStyle = colors[i];
    ctx.moveTo(160,160);
    ctx.arc(160,160,160,start,start+arc);
    ctx.fill();

    /* ê¸€ì”¨ í¬ê²Œ */
    ctx.save();
    ctx.translate(160,160);
    ctx.rotate(start + arc / 2);
    ctx.fillStyle = "#333";
    ctx.font = "bold 18px Arial";
    ctx.fillText(items[i], 70, 5);
    ctx.restore();
  }
}

/* ì• ë‹ˆë©”ì´ì…˜ */
function animate() {
  if (spinning) {
    angle += speed;
    angle %= (2 * Math.PI);
    drawWheel();
    requestAnimationFrame(animate);
  }
}

/* ì‹œì‘ */
function startSpin() {
  spinning = true;
  speed = 0.35;
  resultIndex = null;
  animate();
}

/* ë©ˆì¶¤ (ì¹¸ ì¤‘ì•™ ì •ë ¬) */
function stopSpin() {
  spinning = false;

  const arc = (2 * Math.PI) / items.length;

  const rawIndex = ((2 * Math.PI - angle) % (2 * Math.PI)) / arc;
  const index = Math.floor(rawIndex);

  resultIndex = index;

  /* ì¤‘ì•™ ì •ë ¬ ë³´ì • */
  angle = (2 * Math.PI) - (index * arc) - arc/2;

  drawWheel();
}

/* í´ë¦­ ì‹œ íŒì—… */
canvas.addEventListener("click", () => {
  if (resultIndex === null) return;

  const result = items[resultIndex];

  document.getElementById("awardTitle").innerText = result;
  document.getElementById("awardDesc").innerText = descriptions[result];
  document.getElementById("popup").style.display = "flex";
});

/* íŒì—… ë‹«ê¸° */
function closePopup() {
  document.getElementById("popup").style.display = "none";
}

/* ìµœì´ˆ ì‹¤í–‰ */
drawWheel();
</script>

</body>
</html>
