<!doctype html> 
<html lang="ko">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>ìš°ë¦¬ ê°€ì¡± ì‹œìƒì‹</title>

<style>
body{
  margin:0;
  font-family: Arial;
  text-align:center;
  background: linear-gradient(135deg,#ffe5ec,#e0f7fa,#fff1e6,#e5ffe5);
}

h1{ margin-top:20px; }

/* í™”ì‚´í‘œ */
.pointer{
  width:0;height:0;
  border-left:18px solid transparent;
  border-right:18px solid transparent;
  border-top:28px solid #ff4d6d;
  margin:10px auto;
}

/* ë£°ë › */
.container{
  position:relative;
  width:360px;
  height:360px;
  margin:20px auto;
}

canvas{
  width:100%;
  height:100%;
  border-radius:50%;
}

/* ë²„íŠ¼ */
button{
  padding:12px 18px;
  margin:6px;
  border:none;
  border-radius:12px;
  background:#ff6b81;
  color:#fff;
  cursor:pointer;
}
button:hover{ background:#ff4757; }

/* íŒì—… */
.popup{
  position:fixed;
  top:0;left:0;
  width:100%;height:100%;
  background:rgba(0,0,0,0.4);
  display:none;
  justify-content:center;
  align-items:center;
}

.popup-box{
  background:white;
  padding:25px;
  border-radius:20px;
  width:260px;
  position:relative;
}

.close{
  position:absolute;
  right:10px;
  top:5px;
  cursor:pointer;
  font-size:18px;
}
</style>
</head>

<body>

<h1>ğŸŒ· ìš°ë¦¬ ê°€ì¡± ì‹œìƒì‹ ğŸŒ·</h1>

<div class="pointer"></div>

<div class="container">
  <canvas id="wheel" width="360" height="360"></canvas>
</div>

<button onclick="startSpin()">ì‹œì‘</button>
<button onclick="stopSpin()">ë©ˆì¶¤</button>
<button onclick="showResult()">ë‚´ìš©</button>

<div class="popup" id="popup">
  <div class="popup-box">
    <div class="close" onclick="closePopup()">âœ–</div>
    <h2 id="title"></h2>
    <p id="desc"></p>
  </div>
</div>

<script>
const canvas = document.getElementById("wheel");
const ctx = canvas.getContext("2d");

const items = [
"ìƒìƒì´ ìƒ","ì›ƒ ìƒ","ë°©ì†¡ ìƒ","ë²„íŒ€ëª© ìƒ", 
"ëˆˆë¬¼ ìƒ","ì‚¬ë‘ ìƒ","í–‡ì‚´ìƒ", 
"ë¬µë¬µ ìƒ","í™˜ìƒ ìƒ","ë°©íŒ¨ ìƒ" 
];

const desc = {
"ìƒìƒì´ ìƒ":"ë‚¨ë“¤ê³¼ ë‹¤ë¥¸ ì¬ëŠ¥ê³¼ ê¸°ë°œí•œ ìƒê°ìœ¼ë¡œ ê°€ì¡±ì„ ë†€ë¼ê²Œ í•˜ëŠ” ì‚¬ëŒì—ê²Œ ë“œë¦¬ëŠ” ìƒ",
"ì›ƒ ìƒ":"ì–¸ì œ ì–´ë””ì„œë‚˜ ë°ì€ ì›ƒìŒìœ¼ë¡œ ê°€ì¡±ì˜ ë¶„ìœ„ê¸°ë¥¼ ë”°ëœ»í•˜ê²Œ ë§Œë“œëŠ” ì‚¬ëŒì—ê²Œ ë“œë¦¬ëŠ” ìƒ",
"ë°©ì†¡ ìƒ":"ëŠì„ì—†ëŠ” ì´ì•¼ê¸°ì™€ ìˆ˜ë‹¤ë¡œ ì§‘ì•ˆì„ í™œê¸°ì°¨ê²Œ ë§Œë“œëŠ” ì‚¬ëŒì—ê²Œ ë“œë¦¬ëŠ” ìƒ",
"ë²„íŒ€ëª© ìƒ":"í˜ë“¤ ë•Œ í•­ìƒ ì˜†ì—ì„œ ì§€ì¼œì£¼ê³  ê°€ì¡±ì˜ ì¤‘ì‹¬ì´ ë˜ì–´ì£¼ëŠ” ì‚¬ëŒì—ê²Œ ë“œë¦¬ëŠ” ìƒ",
"ëˆˆë¬¼ ìƒ":"í‰ì†Œì—” í‘œí˜„ ëª» í–ˆì§€ë§Œ ê°€ì¥ ê³ ë§™ê³  ê°€ì¥ ì†Œì¤‘í•œ ì‚¬ëŒì—ê²Œ ë“œë¦¬ëŠ” ìƒ",
"ì‚¬ë‘ ìƒ":"í‘œí˜„ì€ ì„œíˆ´ëŸ¬ë„ ëˆ„êµ¬ë³´ë‹¤ ê°€ì¡±ì„ ê¹Šì´ ì‚¬ë‘í•˜ëŠ” ë§ˆìŒì„ ê°€ì§„ ì‚¬ëŒì—ê²Œ ë“œë¦¬ëŠ” ìƒ",
"í–‡ì‚´ìƒ":"ì¡´ì¬ë§Œìœ¼ë¡œë„ ê°€ì¡±ì˜ í•˜ë£¨ë¥¼ ë°ê²Œ ë§Œë“¤ì–´ì£¼ëŠ” ì‚¬ëŒì—ê²Œ ë“œë¦¬ëŠ” ìƒ",
"ë¬µë¬µ ìƒ":"í‹°ë‚´ì§€ ì•Šì§€ë§Œ í•­ìƒ ë’¤ì—ì„œ ê°€ì¡±ì„ ì§€ì¼œì¤€ ì‚¬ëŒì—ê²Œ ë“œë¦¬ëŠ” ìƒ",
"í™˜ìƒ ìƒ":"ë‹¤ì‹œ íƒœì–´ë‚˜ë„ ê¼­ ìš°ë¦¬ ê°€ì¡±ìœ¼ë¡œ ë§Œë‚˜ê³  ì‹¶ì€ ì‚¬ëŒì—ê²Œ ë“œë¦¬ëŠ” ìƒ",
"ë°©íŒ¨ ìƒ":"ì–´ë–¤ ìƒí™©ì—ì„œë„ ê°€ì¡±ì„ ë¨¼ì € ì§€ì¼œì£¼ëŠ” ë¶„ê»˜ ë“œë¦¬ëŠ” ìƒ"
};

const colors = ["#ffadad","#ffd6a5","#fdffb6","#caffbf","#9bf6ff","#a0c4ff","#bdb2ff","#ffc6ff","#fffffc","#d8f3dc"];

let angle=0;
let spinning=false;
let speed=0;
let resultIndex=null;

let history = [];

let targetAngle = null;
let decelerating = false;

const center=180;
const radius=160;

/* ë£°ë › ê·¸ë¦¬ê¸° */
function draw(){
  const arc = (2*Math.PI)/items.length;
  ctx.clearRect(0,0,360,360);

  for(let i=0;i<items.length;i++){
    const start = angle + i*arc;

    ctx.beginPath();
    ctx.moveTo(center,center);
    ctx.arc(center,center,radius,start,start+arc);
    ctx.fillStyle = colors[i];
    ctx.fill();

    /* í…ìŠ¤íŠ¸ */
    ctx.save();
    ctx.translate(center,center);
    ctx.rotate(start + arc/2);
    ctx.fillStyle="#333";
    ctx.font="bold 20px Arial"; // ğŸ‘‰ ê¸€ì”¨ í¬ê¸° 20px
    ctx.textAlign="center";
    ctx.fillText(items[i],80,5);
    ctx.restore();
  }
}

/* ì• ë‹ˆë©”ì´ì…˜ */
function animate(){
  if(spinning){
    angle += speed;

    if(decelerating){
      speed *= 0.97;

      if(speed < 0.002){
        spinning = false;
        decelerating = false;
        angle = targetAngle;
      }
    }

    draw();
    requestAnimationFrame(animate);
  }
}

function startSpin(){
  spinning = true;
  decelerating = false;
  speed = 0.35;
  targetAngle = null;
  animate();
}

function stopSpin(){
  if(!spinning) return;

  const arc = (2*Math.PI)/items.length;

  let available = items.map((_,i)=>i).filter(i=>!history.includes(i));

  if(available.length === 0){
    history = [];
    available = items.map((_,i)=>i);
  }

  const index = available[Math.floor(Math.random()*available.length)];
  history.push(index);

  resultIndex = index;

  targetAngle = (Math.PI*1.5) - (index*arc) - (arc/2);

  decelerating = true;
}

/* íŒì—… */
function showResult(){
  if(resultIndex===null) return;

  const name = items[resultIndex];

  document.getElementById("title").innerText=name;
  document.getElementById("desc").innerText=desc[name];

  document.getElementById("popup").style.display="flex";
}

function closePopup(){
  document.getElementById("popup").style.display="none";
}

draw();
</script>

</body>
</html>
